<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
    <title>Movie Recommender</title>
</head>
<body>
    <div class="">
        <strong>Select Language:</strong>
        <select id="multiple-checkboxes" multiple="multiple">
            <option value="Action">Action</option>
            <option value="Adventure">Adventure</option>
            <option value="Animation">Animation</option>
            <option value="Children">Children</option>
            <option value="Comedy">Comedy</option>
            <option value="Crime">Crime</option>
            <option value="Documentary">Documentary</option>
            <option value="Drama">Drama</option>
            <option value="Fantasy">Fantasy</option>
            <option value="Film-Noir">Film-Noir</option>
            <option value="Horror">Horror</option>
            <option value="IMAX">IMAX</option>
            <option value="Musical">Musical</option>
            <option value="Mystery">Mystery</option>
            <option value="Romance">Romance</option>
            <option value="Sci-Fi">Sci-Fi</option>
            <option value="Thriller">Thriller</option>
            <option value="War">War</option>
            <option value="Western">Western</option>
        </select>
        <label class="form-label select-label">Example label</label>
    </div>

    <button id="button-request">Ver Recomendações</button>

    <script type='module'>
        $(document).ready(function() {
            $('#multiple-checkboxes').multiselect({
                includeSelectAllOption: true,
            });
        });

        fetch('/api', {
                method: 'GET', // ou 'POST'
            })
            .then(response => response.text())
            .then(data => console.log(data))
            .catch((error) => {
            console.error('Error:', error);
        });

        function selecao_atual() {
            var select = document.getElementById("multiple-checkboxes")
            var selected = [...select.selectedOptions].map(option => option.value);
            return selected
        }

        document.querySelector("#button-request").addEventListener("click", function(){

            const selected = selecao_atual()
            var data_json = {
                generos: selected,
                n_min_aval: 50,
                rating_min_aval: 3
            }

            fetch('/api/data', {
                method: 'POST', // Altere 'GET' para 'POST'
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data_json) // Dados que você deseja enviar
                })
                .then(response => response.json())
                .then(data => console.log(data))
                .catch((error) => {
                console.error('Error:', error);
                });
            });

    </script>
</body>
</html>



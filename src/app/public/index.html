<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
    <title>Movie Recommender</title>
</head>
<body>
    <div class="">
        <strong>Select Language:</strong>
        <select id="multiple-checkboxes" multiple="multiple">
            <option value="php">PHP</option>
            <option value="javascript">JavaScript</option>
            <option value="java">Java</option>
            <option value="sql">SQL</option>
            <option value="jquery">Jquery</option>
            <option value=".net">.Net</option>
        </select>
        <label class="form-label select-label">Example label</label>
    </div>

    <button id="button-request">Ver Recomendações</button>

    <script type='module'>
        $(document).ready(function() {
            $('#multiple-checkboxes').multiselect({
                includeSelectAllOption: true,
            });
        });

        fetch('/api', {
                method: 'GET', // ou 'POST'
            })
            .then(response => response.text())
            .then(data => console.log(data))
            .catch((error) => {
            console.error('Error:', error);
        });

        function selecao_atual() {
            var select = document.getElementById("multiple-checkboxes")
            var selected = [...select.selectedOptions].map(option => option.value);
            return selected
        }

        document.querySelector("#button-request").addEventListener("click", function(){

            const selected = selecao_atual()
            var data = {
                generos: selected,
                n_min_aval: 50,
                rating_min_aval: 3
            }

            fetch('/api/data', {
                method: 'POST', // Altere 'GET' para 'POST'
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(selected) // Dados que você deseja enviar
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch((error) => {
            console.error('Error:', error);
            });
        });

    </script>
</body>
</html>


